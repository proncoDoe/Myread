{"ast":null,"code":"import _regeneratorRuntime from \"/home/proncodoe/Desktop/projects/Myread/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/proncodoe/Desktop/projects/Myread/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/home/proncodoe/Desktop/projects/Myread/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/proncodoe/Desktop/projects/Myread/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/home/proncodoe/Desktop/projects/Myread/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/proncodoe/Desktop/projects/Myread/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nvar _jsxFileName = \"/home/proncodoe/Desktop/projects/Myread/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport { Route } from 'react-router-dom';\nimport * as BooksAPI from './BooksAPI';\nimport BookList from \"./BookList\";\nimport SearchBooks from './SearchBooks';\n\nvar BooksApp = /*#__PURE__*/function (_React$Component) {\n  _inherits(BooksApp, _React$Component);\n\n  var _super = _createSuper(BooksApp);\n\n  function BooksApp() {\n    var _this;\n\n    _classCallCheck(this, BooksApp);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      books: []\n    };\n    _this.shelfBooks = [{\n      key: 'currentlyReading',\n      name: 'Currently Reading'\n    }, {\n      key: 'wantToRead',\n      name: 'Want to Read'\n    }, {\n      key: 'read',\n      name: 'Read'\n    }];\n\n    _this.ChangeShelf = function (book, shelf) {\n      BooksAPI.update(book, shelf).then(function (books) {\n        if (book.shelf === 'none' && shelf !== 'none') {\n          _this.setState(function (state) {\n            var newBooks = state.books.concat(book);\n            return {\n              books: newBooks\n            };\n          });\n        }\n\n        var updatedBooks = _this.state.books.map(function (b) {\n          if (b.id === book.id) {\n            b.shelf = shelf;\n          }\n\n          return b;\n        });\n\n        _this.setState({\n          books: updatedBooks\n        }); // if 'none' shelve is chosen, then remove that book from the state\n\n\n        if (shelf === 'none') {\n          _this.setState(function (state) {\n            var newBooks = state.books.filter(function (deleteBook) {\n              return deleteBook.id !== book.id;\n            });\n            return {\n              books: newBooks\n            };\n          });\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(BooksApp, [{\n    key: \"componentDidMount\",\n    value:\n    /* once this component is rendered, the async  componentDidMount() {\n    function is run */\n    function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _this2 = this;\n\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return BooksAPI.getAll().then(function (books) {\n                  _this2.setState({\n                    books: books\n                  });\n                });\n\n              case 3:\n                _context.next = 8;\n                break;\n\n              case 5:\n                _context.prev = 5;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(_context.t0);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 5]]);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var books = this.state.books;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"app\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Route, {\n        path: \"/search\",\n        render: function render() {\n          return /*#__PURE__*/React.createElement(SearchBooks, {\n            books: books,\n            onChangeShelf: _this3.ChangeShelf,\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 11\n            }\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        render: function render() {\n          return /*#__PURE__*/React.createElement(BookList, {\n            books: books,\n            shelfBooks: _this3.shelfBooks,\n            onChangeShelf: _this3.ChangeShelf,\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 11\n            }\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return BooksApp;\n}(React.Component);\n\nexport default BooksApp;","map":{"version":3,"names":["React","Route","BooksAPI","BookList","SearchBooks","BooksApp","state","books","shelfBooks","key","name","ChangeShelf","book","shelf","update","then","setState","newBooks","concat","updatedBooks","map","b","id","filter","deleteBook","getAll","console","log","Component"],"sources":["/home/proncodoe/Desktop/projects/Myread/src/App.js"],"sourcesContent":["import React from 'react'\nimport './App.css'\nimport { Route } from 'react-router-dom'\nimport * as BooksAPI from './BooksAPI'\nimport BookList from \"./BookList\"\nimport SearchBooks from './SearchBooks'\n\nclass BooksApp extends React.Component {\n  state = {\n    books : []\n  }\n\n  /* once this component is rendered, the async  componentDidMount() {\n function is run */\n  async  componentDidMount() {\n    try{\n      await BooksAPI.getAll().then((books) => {\n      this.setState({ books })\n    })\n\n  }catch(err){\n\n    console.log(err)\n  }\n\n  }\n  \n  shelfBooks = [\n    {key:'currentlyReading' , name: 'Currently Reading'},\n    {key:'wantToRead' , name: 'Want to Read'},\n    {key:'read' , name: 'Read'},\n  ]\n\n  ChangeShelf = (book, shelf) => {\n    BooksAPI.update(book, shelf).then(books => {\n      if(book.shelf === 'none' && shelf !== 'none'){\n        this.setState(state => {\n          const newBooks = state.books.concat(book);\n          return {books: newBooks}\n        })\n      }\n\n      const updatedBooks = this.state.books.map(b => {\n        if (b.id === book.id) {\n          b.shelf = shelf\n        }\n        return b;\n      });\n\n      this.setState({\n        books: updatedBooks,\n      });\n      \n        // if 'none' shelve is chosen, then remove that book from the state\n        if(shelf === 'none'){\n          this.setState(state=>{\n            const newBooks = state.books.filter(deleteBook => deleteBook.id !== book.id);\n            return {books: newBooks}\n          })\n        }\n    });\n  }\n\n  render() {\n    const { books } = this.state;\n\n    return (\n      <div className=\"app\">\n        <Route path='/search'\n        render={() => (\n          <SearchBooks books={books} onChangeShelf={this.ChangeShelf} />\n        )}\n        />\n\n        <Route exact path='/'\n        render={() => (\n          <BookList books={books} shelfBooks={this.shelfBooks} onChangeShelf={this.ChangeShelf} />\n        )}\n        />\n      </div>\n    )\n  }\n}\n\n\nexport default BooksApp\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}